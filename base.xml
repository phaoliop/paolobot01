<context>
  <pattern name="saludo" value="(hola|buenas|ola|holi) *"/>
  <pattern name="Preg_estado" value="(que tal*|como estas*|como te encuentras*)"/>
  <pattern name="Rpt_estado_malo" value="* (nada bien|peor|mal) *"/>
  <pattern name="Rpt_estado_triste" value="* (triste) *"/>
  <pattern name="Rpt_estado_bueno" value="* (bien|mejor|genial) *"/>
  	<input>
  		<pattern value="$saludo"/>
  			<context id="Saludo_sin_nombre" if="empty($UserName)">
  				<output value="Hola, cual es tu nombre?"/>
  					<input pattern="$Text">
				        <var name="UserName" value="$Text" scope="user"/>
        				<output value="Mucho gusto $UserName!"/>
      				</input>
  			</context>
  			<context id="Saludo_con_nombre" if="full($UserName)">
  				<output value="Hola $UserName!"/>
  			</context>
  	</input>
  	<input>
  		<pattern value="$saludo $Preg_estado"/>
  			<var name="rpt" value="Hola, yo estoy bien."/>

  			<context id="rpt_y_preg_estado">
  				<output value="$rpt Que tal?"/>
  					<input>
  							<context id="me_dice_su_estado_bueno">
  								<pattern value="$Rpt_estado_bueno"/>
									<var name="UserEstado" value="bien" scope="user"/>
									<output value="Genial!"/>
  							</context>

  					</input>
  			</context>
  	</input>
  	<input>
  		<pattern value="$Preg_estado"/>
  			<var name="rpt" value="yo estoy bien."/>

  			<context id="rpt_y_preg_estado">
  			</context>
  	</input>

</context>
